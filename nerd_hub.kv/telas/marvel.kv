#:import dp kivy.metrics.dp

<MarvelScreen>:
    canvas.before:
        Color:
            rgba: 0.85, 0.85, 0.85, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0

        # HEADER IGUAL AO DA HOME
        BoxLayout:
            size_hint_y: None
            height: dp(60)
            padding: dp(10), 0
            spacing: dp(10)
            canvas.before:
                Color:
                    rgba: 0.07, 0.57, 0.38, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            # BOT√ÉO NERD HUB (VOLTA PARA HOME)
            Button:
                text: "NERD HUB"
                size_hint_x: None
                width: dp(120)
                background_normal: ''
                background_color: 0, 0, 0, 0  # Transparente
                color: 1, 1, 1, 1
                font_size: '18sp'
                bold: True
                on_release:
                    app.root.transition.direction = "right"
                    app.root.current = "home"

            TextInput:
                hint_text: "Buscar..."
                multiline: False
                background_normal: ''
                background_active: ''
                background_color: 1,1,1,1
                foreground_color: 0,0,0,1
                font_size: '14sp'
                size_hint_x: 1.5
                size_hint_y: None
                height: dp(36)
                padding: [dp(12), dp(10)]
                radius: [dp(8),]
                pos_hint: {'center_y': 0.5}

            BoxLayout:
                size_hint_x: None
                width: dp(80)
                spacing: dp(10)
                padding: 0, dp(12)

                ImageButton:
                    source: 'nerd_hub.kv/imagens/imagens_home/carrinho.png'
                    size_hint: None, None
                    width: dp(25)
                    height: dp(25)
                    on_release:
                        app.root.transition.direction = "left"
                        app.root.current = "carrinho"

                ImageButton:
                    source: 'nerd_hub.kv/imagens/imagens_home/perfil.png'
                    size_hint: None, None
                    width: dp(25)
                    height: dp(25)
                    on_release:
                        app.root.transition.direction = "left"
                        app.root.current = "login"

        # BANNER DISNEY (IGUAL AO DA HOME)
        BoxLayout:
            size_hint_y: None
            height: dp(200)
            padding: dp(20), dp(10)
            spacing: 0
            orientation: 'horizontal'
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                    source: "imagens/imagens_home/banner_marvel.png"
            Widget:
                size_hint_x: 0.5

        Widget:
            size_hint_y: None
            height: dp(10)

        # CARROSSEL DE MARCAS (SEM LABEL)
        BoxLayout:
            size_hint_y: None
            height: dp(180)
            padding: dp(20), dp(5)

            Carousel:
                id: marcas_carousel
                direction: 'right'
                loop: True
                size_hint_y: None
                height: dp(180)
                anim_move_duration: 0.4
                scroll_timeout: 200
                spacing: dp(20)
                padding: dp(10), 0

                # XBOX
                FloatLayout:
                    size_hint: None, None
                    size: dp(360), dp(180)
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(16),]
                    ImageButton:
                        source: "imagens/imagens_home/banner_xbox.png"
                        size_hint: 0.9, 0.9
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12),]
                        on_release:
                            app.root.transition.direction = "left"
                            app.root.current = "xbox"

                # MARVEL
                FloatLayout:
                    size_hint: None, None
                    size: dp(360), dp(180)
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(16),]
                    ImageButton:
                        source: "imagens/imagens_home/banner_disney.png"
                        size_hint: 0.9, 0.9
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12),]
                        on_release:
                            app.root.transition.direction = "left"
                            app.root.current = "disney"

                # PLAYSTATION
                FloatLayout:
                    size_hint: None, None
                    size: dp(360), dp(180)
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(16),]
                    ImageButton:
                        source: "imagens/imagens_home/banner_playstation.png"
                        size_hint: 0.9, 0.9
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12),]
                        on_release:
                            app.root.transition.direction = "left"
                            app.root.current = "playstation"

                # STAR WARS
                FloatLayout:
                    size_hint: None, None
                    size: dp(360), dp(180)
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(16),]
                    ImageButton:
                        source: "imagens/imagens_home/banner_starwars.png"
                        size_hint: 0.9, 0.9
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12),]
                        on_release:
                            app.root.transition.direction = "left"
                            app.root.current = "starwars"

        Widget:
            size_hint_y: None
            height: dp(15)

        # BARRA DE PRODUTOS DISNEY
        BoxLayout:
            size_hint_y: None
            height: dp(32)
            padding: dp(8), 0
            canvas.before:
                Color:
                    rgba: 0.07, 0.57, 0.38, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: "PRODUTOS MARVEL"
                color: 1, 1, 1, 1
                bold: True
                font_size: '16sp'
                halign: 'center'
                valign: 'middle'
                text_size: self.size

        # GRID DE PRODUTOS DISNEY
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            bar_width: dp(4)
            bar_color: 0.07, 0.57, 0.38, 0.7
            bar_inactive_color: 0.07, 0.57, 0.38, 0.3

            GridLayout:
                id: products_grid
                cols: 2
                spacing: dp(12)
                size_hint_y: None
                height: self.minimum_height
                row_default_height: dp(250)
                padding: dp(15), dp(5), dp(15), dp(15)
